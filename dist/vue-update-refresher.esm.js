const e={install(e,t){t||(t={}),t.updateURLS||(t.updateURLS=[]),t.updateInterval||(t.updateInterval=6e4),t.versionURL||(t.versionURL=null),t.appURL||(t.appURL="http://localhost:8080"),window.updateURLS=t.updateURLS,window.updateInterval=t.updateInterval,window.versionURL=t.versionURL,window.appURL=t.appURL,window.getMeta=function(e){const t=document.getElementsByTagName("meta");for(let n=0;n<t.length;n++)if(t[n].getAttribute("name")===e)return t[n].getAttribute("content");return""},window.iterateUpdateURLS=async function(){for(const e of window.updateURLs)await fetch(e,{cache:"reload"});return window.location=window.appURL,!1},window.appWillUpdate=async function(){let e=localStorage.getItem("updateRefreshes");e=null===e||"null"===e||"undefined"===e?0:parseInt(e),e>1&&await window.iterateUpdateURLS(),e+=1,localStorage.setItem("updateRefreshes",e.toString())},window.appUpToDate=async function(){localStorage.setItem("updateRefreshes","0")},t.versionURL&&(window.tickVersionCheck=async function(){const e=fetch(window.versionURL,{method:"GET",headers:{"Content-Type":"application/json"}});await e.then(e=>{if(200===e.status){return e.json().then(e=>{e.version&&(e.version.trim()>window.getMeta("vue-app-version")?(window.appWillUpdate(),window.iterateUpdateURLS()):localStorage.setItem("updateRefreshes","0"))})}})},window.versionCheckTimer=setInterval(window.tickVersionCheck,window.updateInterval))}};export{e as VUpdateRefresherPlugin};//# sourceMappingURL=vue-update-refresher.esm.js.map
